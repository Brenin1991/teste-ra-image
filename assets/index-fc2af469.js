import{r as f,a as Se,R as pe}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();var ve={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ie=f,Ne=Symbol.for("react.element"),Ue=Symbol.for("react.fragment"),Pe=Object.prototype.hasOwnProperty,Ce=Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function xe(a,s,l){var d,t={},r=null,c=null;l!==void 0&&(r=""+l),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(c=s.ref);for(d in s)Pe.call(s,d)&&!Fe.hasOwnProperty(d)&&(t[d]=s[d]);if(a&&a.defaultProps)for(d in s=a.defaultProps,s)t[d]===void 0&&(t[d]=s[d]);return{$$typeof:Ne,type:a,key:r,ref:c,props:t,_owner:Ce.current}}se.Fragment=Ue;se.jsx=xe;se.jsxs=xe;ve.exports=se;var e=ve.exports,te={},he=Se;te.createRoot=he.createRoot,te.hydrateRoot=he.hydrateRoot;let Q=null,de=null,ee=null;async function Te(){var a,s;try{const l=((s=(a=import.meta)==null?void 0:a.env)==null?void 0:s.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),t=`${l&&l!=="/"?l.endsWith("/")?l:l+"/":"/"}assets/data/ra.json`,r=await fetch(t);return r.ok?(await r.json()).configuracoes||{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0}:(console.warn("N√£o foi poss√≠vel carregar ra.json, usando configura√ß√µes padr√£o"),{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0})}catch(l){return console.warn("Erro ao carregar configura√ß√µes do RA, usando padr√£o:",l),{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0}}}async function ye(){return ee||(ee=(async()=>{try{console.log("Iniciando inicializa√ß√£o global...");const a=await Te();console.log("Configura√ß√µes do RA:",a),a.usarAFrame!==!1?(console.log("Aguardando A-Frame..."),await $e(),console.log("A-Frame pronto"),console.log("Inicializando A-Frame Scene..."),await Be(),console.log("A-Frame Scene inicializado"),je()):console.log("A-Frame desabilitado nas configura√ß√µes"),a.usarVideo!==!1?(console.log(`Inicializando c√¢mera (${a.cameraFacing||"user"})...`),await Le(a),console.log("C√¢mera inicializada")):console.log("V√≠deo desabilitado nas configura√ß√µes"),a.usarFaceTracking!==!1?(console.log("Carregando face-api.js..."),await ze(),console.log("face-api.js carregado")):console.log("Face Tracking desabilitado nas configura√ß√µes"),console.log("Inicializa√ß√£o global conclu√≠da")}catch(a){throw console.error("Erro na inicializa√ß√£o global:",a),a}})(),ee)}function je(){const a=new MutationObserver(()=>{const s=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');s&&(console.log("Modal detectado, garantindo que seja clic√°vel..."),s.style.pointerEvents="auto",s.style.zIndex="2147483647",s.style.position="fixed",s.style.display="block",s.style.visibility="visible",s.style.opacity="1",s.querySelectorAll("*").forEach(t=>{t.style.pointerEvents="auto"}),s.querySelectorAll("button").forEach(t=>{t.style.pointerEvents="auto",t.style.cursor="pointer",t.style.zIndex="2147483647",t.style.position="relative"}))});a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(a.disconnect(),je())},1e3)}function $e(){return new Promise(a=>{if(typeof window<"u"&&window.AFRAME){a();return}const s=()=>{typeof window<"u"&&window.AFRAME?a():setTimeout(s,100)};s()})}async function Le(a){try{const s=document.getElementById("arjs-video");if(s&&s.srcObject)return Q=s,de=s.srcObject,de;const l=(a==null?void 0:a.cameraFacing)||"user",d=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:l}},audio:!1});if(s)Q=s;else{const t=document.createElement("video");t.id="arjs-video",t.setAttribute("playsinline",""),t.setAttribute("autoplay",""),t.muted=!0,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.objectFit="cover",t.style.zIndex="0",t.style.display="none",t.style.visibility="hidden",t.style.opacity="0",document.body.appendChild(t),Q=t}return Q.srcObject=d,de=d,await Q.play(),d}catch(s){return console.warn("Erro ao inicializar c√¢mera global:",s),null}}async function ze(){if(!window.faceapi)return new Promise((a,s)=>{const l=document.createElement("script");l.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",l.onload=()=>{console.log("face-api.js carregado"),a()},l.onerror=()=>s(new Error("Failed to load face-api.js")),document.head.appendChild(l)})}async function Be(){if(document.querySelector("a-scene")){console.log("A-Frame Scene j√° existe");return}const a=document.createElement("a-scene");a.id="ar-scene-main",a.setAttribute("embedded","true"),a.setAttribute("vr-mode-ui","enabled: false"),a.setAttribute("device-orientation-permission-ui","enabled: true"),a.setAttribute("renderer","alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;"),a.setAttribute("webxr","enabled: false"),a.setAttribute("background","transparent: true"),a.setAttribute("stats","false"),a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.zIndex="-100",a.style.background="transparent",document.body.appendChild(a),await new Promise(s=>{const l=()=>{const d=document.querySelector("a-scene");d&&d.hasLoaded?s():setTimeout(l,100)};l()}),console.log("A-Frame Scene criado e inicializado")}const be=({onNavigate:a,onLoadingComplete:s})=>{const[l,d]=f.useState(0),[t,r]=f.useState("Inicializando...");return f.useEffect(()=>((async()=>{const o=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json","/assets/images/foguete-top.png","/assets/images/foguete-bottom.png","/assets/images/foguete-montagem.png","/assets/images/btn-jogar-foguete.png","/assets/images/btn-jogar-foguete-disable.png","/assets/images/btn-next.png","/assets/images/btn-back.png","/assets/images/pecas/ponta/01.png","/assets/images/pecas/ponta/02.png","/assets/images/pecas/ponta/03.png","/assets/images/pecas/corpo/01.png","/assets/images/pecas/corpo/02.png","/assets/images/pecas/corpo/03.png","/assets/images/pecas/janela/01.png","/assets/images/pecas/janela/02.png","/assets/images/pecas/janela/03.png","/assets/images/pecas/asa/01.png","/assets/images/pecas/asa/02.png","/assets/images/pecas/asa/03.png","/assets/images/pecas/jato/01.png","/assets/images/pecas/jato/02.png","/assets/images/pecas/jato/03.png","/assets/images/abas/01.png","/assets/images/abas/02.png","/assets/images/abas/03.png","/assets/images/abas/04.png","/assets/images/abas/05.png","/assets/images/abas/01-disable.png","/assets/images/abas/02-disable.png","/assets/images/abas/03-disable.png","/assets/images/abas/04-disable.png","/assets/images/abas/05-disable.png"],g=(()=>{var h,m;const u=((m=(h=import.meta)==null?void 0:h.env)==null?void 0:m.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return u&&u!=="/"?u.endsWith("/")?u:u+"/":"/"})();try{r("Aguardando inicializa√ß√£o..."),await ye(),r("Carregando recursos...");for(let u=0;u<o.length;u++){const b=o[u],h=`${g}${b.startsWith("/")?b.slice(1):b}`;if(b.endsWith(".json"))try{if(!(await fetch(h)).ok)throw new Error(`Failed to load ${b}`)}catch(n){console.warn(`Failed to load ${b}:`,n)}else await new Promise(n=>{const p=new Image;p.onload=()=>n(p),p.onerror=()=>{console.warn(`Failed to load image: ${h}`),n(null)},p.src=h});const m=Math.round((u+1)/o.length*100);d(m)}r("Finalizando..."),await new Promise(u=>setTimeout(u,300)),d(100),r("Conclu√≠do!"),await new Promise(u=>setTimeout(u,200)),s==null||s(),a("cover","flip","left")}catch(u){console.error("Erro ao carregar recursos:",u),r("Erro ao carregar. Continuando..."),setTimeout(()=>{a("cover","flip","left")},1e3)}})(),()=>{}),[a,s]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${l}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[l,"%"]})]}),e.jsx("p",{className:"loading-status",children:t})]})})};const Oe=({onNavigate:a,backgroundImage:s})=>{const d=(()=>{var b,h;const g=((h=(b=import.meta)==null?void 0:b.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),u=g&&g!=="/"?g.endsWith("/")?g:g+"/":"/";return u==="/"?"":u.endsWith("/")?u.slice(0,-1):u})(),t=g=>{if(d==="")return g.startsWith("/")?g:`/${g}`;const u=g.startsWith("/")?g.slice(1):g;return`${d}/${u}`},r=s||t("assets/images/bg-capa.png"),c=t("assets/images/header-capa.png"),o=t("assets/images/bottom-capa.png"),i=t("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${r}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:c,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>a("tutorial","zoom-out","right"),style:{backgroundImage:`url(${i})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:o,alt:"Bottom",className:"cover-bottom-img"})})]})};const Me=({onNavigate:a})=>{const l=(()=>{var g,u;const o=((u=(g=import.meta)==null?void 0:g.env)==null?void 0:u.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=o&&o!=="/"?o.endsWith("/")?o:o+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),d=o=>{if(l==="")return o.startsWith("/")?o:`/${o}`;const i=o.startsWith("/")?o.slice(1):o;return`${l}/${i}`},t=d("assets/images/bg-capa.png"),r=d("assets/images/tutorial-panel.png"),c=d("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:r,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>a("ar","fade","right"),style:{backgroundImage:`url("${c}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},De=({onNavigate:a})=>{const l=(()=>{var g,u;const o=((u=(g=import.meta)==null?void 0:g.env)==null?void 0:u.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),i=o&&o!=="/"?o.endsWith("/")?o:o+"/":"/";return i==="/"?"":i.endsWith("/")?i.slice(0,-1):i})(),d=o=>{if(l==="")return o.startsWith("/")?o:`/${o}`;const i=o.startsWith("/")?o.slice(1):o;return`${l}/${i}`},t=d("assets/images/bg-capa.png"),r=d("assets/images/tutorial-panel-2.png"),c=d("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:r,alt:"Tutorial Panel 2",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>a("ar","fade","right"),style:{backgroundImage:`url("${c}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})};const We=({onNavigate:a,backgroundImage:s})=>{const[l,d]=f.useState(!0),[t,r]=f.useState(1),[c,o]=f.useState({ponta:1,corpo:0,janela:0,asa:0,jato:0}),i={1:"ponta",2:"corpo",3:"janela",4:"asa",5:"jato"},u=(()=>{var U,C;const x=((C=(U=import.meta)==null?void 0:U.env)==null?void 0:C.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),w=x&&x!=="/"?x.endsWith("/")?x:x+"/":"/";return w==="/"?"":w.endsWith("/")?w.slice(0,-1):w})(),b=x=>{if(u==="")return x.startsWith("/")?x:`/${x}`;const w=x.startsWith("/")?x.slice(1):x;return`${u}/${w}`},h=s||b("assets/images/bg-capa.png"),m=b("assets/images/foguete-top.png"),n=b("assets/images/foguete-bottom.png"),p=b("assets/images/foguete-montagem.png"),v=b("assets/images/btn-jogar-foguete.png"),j=b("assets/images/btn-jogar-foguete-disable.png"),y=b("assets/images/btn-next.png"),S=b("assets/images/btn-back.png"),E=(x,w)=>{if(w===0)return null;const U=w.toString().padStart(2,"0");return b(`assets/images/pecas/${x}/${U}.png`)},P=E("ponta",c.ponta),A=E("corpo",c.corpo),R=E("janela",c.janela),k=E("asa",c.asa),I=E("jato",c.jato),L=x=>b(`assets/images/abas/0${x}${t===x?"":"-disable"}.png`),ae=x=>{r(x);const w=i[x];c[w]===0&&w!=="ponta"&&o(C=>({...C,[w]:1}))},ne=()=>{const x=i[t],w=c[x];w===0?o(U=>({...U,[x]:1})):w<3&&o(U=>({...U,[x]:w+1}))},K=()=>{const x=i[t],w=c[x];w>1&&x!=="ponta"&&o(U=>({...U,[x]:w-1}))},M=i[t],z=c[M],q=z<3,B=z>1&&M!=="ponta",H=z>0?E(M,z):null,J=c.ponta>0&&c.corpo>0&&c.janela>0&&c.asa>0&&c.jato>0;return f.useEffect(()=>{(async()=>{const U=(()=>{var D,O;const N=((O=(D=import.meta)==null?void 0:D.env)==null?void 0:O.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),F=N&&N!=="/"?N.endsWith("/")?N:N+"/":"/";return F==="/"?"":F.endsWith("/")?F.slice(0,-1):F})(),C=N=>{if(U==="")return N.startsWith("/")?N:`/${N}`;const F=N.startsWith("/")?N.slice(1):N;return`${U}/${F}`},Y=["/assets/images/foguete-top.png","/assets/images/foguete-bottom.png","/assets/images/foguete-montagem.png","/assets/images/btn-jogar-foguete.png","/assets/images/btn-jogar-foguete-disable.png","/assets/images/btn-next.png","/assets/images/btn-back.png","/assets/images/pecas/ponta/01.png","/assets/images/pecas/ponta/02.png","/assets/images/pecas/ponta/03.png","/assets/images/pecas/corpo/01.png","/assets/images/pecas/corpo/02.png","/assets/images/pecas/corpo/03.png","/assets/images/pecas/janela/01.png","/assets/images/pecas/janela/02.png","/assets/images/pecas/janela/03.png","/assets/images/pecas/asa/01.png","/assets/images/pecas/asa/02.png","/assets/images/pecas/asa/03.png","/assets/images/pecas/jato/01.png","/assets/images/pecas/jato/02.png","/assets/images/pecas/jato/03.png","/assets/images/abas/01.png","/assets/images/abas/02.png","/assets/images/abas/03.png","/assets/images/abas/04.png","/assets/images/abas/05.png","/assets/images/abas/01-disable.png","/assets/images/abas/02-disable.png","/assets/images/abas/03-disable.png","/assets/images/abas/04-disable.png","/assets/images/abas/05-disable.png"];try{const N=Y.map(F=>new Promise(D=>{const O=new Image;O.onload=()=>D(),O.onerror=()=>{console.warn(`Failed to load image: ${F}`),D()},O.src=C(F)}));await Promise.all(N),d(!1)}catch(N){console.error("Erro ao carregar imagens:",N),d(!1)}})()},[]),l?e.jsx("div",{className:"rocket-screen rocket-loading-overlay",children:e.jsxs("div",{className:"rocket-loading-content",children:[e.jsx("div",{className:"rocket-loading-spinner"}),e.jsx("p",{className:"rocket-loading-text",children:"Carregando..."})]})}):e.jsxs("div",{className:"rocket-screen",style:{backgroundImage:`url("${h}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"rocket-top-image",children:e.jsx("img",{src:m,alt:"Foguete Top",className:"rocket-top-img"})}),e.jsx("div",{className:"rocket-tabs-container",children:[1,2,3,4,5].map(x=>e.jsx("button",{className:`rocket-tab ${t===x?"active":""}`,onClick:()=>ae(x),style:{backgroundImage:`url("${L(x)}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},x))}),e.jsxs("div",{className:"rocket-montagem-container",children:[e.jsx("img",{src:p,alt:"Foguete Montagem",className:"rocket-montagem-img"}),P&&e.jsx("img",{src:P,alt:"Ponta",className:"rocket-ponta"}),A&&e.jsx("img",{src:A,alt:"Corpo",className:"rocket-corpo"}),R&&e.jsx("img",{src:R,alt:"Janela",className:"rocket-janela"}),k&&e.jsx("img",{src:k,alt:"Asa",className:"rocket-asa"}),I&&e.jsx("img",{src:I,alt:"Jato",className:"rocket-jato"})]}),e.jsxs("div",{className:"rocket-bottom-image",children:[e.jsx("img",{src:n,alt:"Foguete Bottom",className:"rocket-bottom-img"}),H&&e.jsx("div",{className:"rocket-preview-container",children:e.jsx("img",{src:H,alt:`Preview ${M}`,className:"rocket-preview-image"})}),e.jsxs("div",{className:"rocket-navigation-buttons",children:[e.jsx("button",{className:"rocket-button-back",onClick:K,disabled:!B,style:{backgroundImage:`url("${S}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"rocket-button-jogar",onClick:()=>{try{localStorage.setItem("rocket-pieces",JSON.stringify(c)),console.log("‚úÖ Pe√ßas do foguete salvas:",c)}catch(x){console.error("‚ùå Erro ao salvar pe√ßas do foguete:",x)}a("tutorial2","fade","right")},disabled:!J,style:{backgroundImage:`url("${J?v:j}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"rocket-button-next",onClick:ne,disabled:!q,style:{backgroundImage:`url("${y}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})]})]})},qe=({enabled:a})=>{const s=f.useRef(null),l=f.useRef(!1),d=f.useRef({x:0,y:0,z:0}),t=f.useRef({x:0,y:1,z:-1.2}),r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return f.useEffect(()=>{async function c(){if(l.current)return;const i=window.faceapi,g="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";r?await Promise.all([i.nets.tinyFaceDetector.loadFromUri(g),i.nets.faceLandmark68Net.loadFromUri(g)]):await Promise.all([i.nets.tinyFaceDetector.loadFromUri(g),i.nets.faceLandmark68Net.loadFromUri(g),i.nets.faceExpressionNet.loadFromUri(g)]),l.current=!0,console.log("Modelos de face-api carregados")}async function o(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(m=>setTimeout(m,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await c();const i=document.getElementById("arjs-video");if(!i||!i.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(i.readyState<2&&await new Promise(m=>{const n=()=>{i.removeEventListener("loadedmetadata",n),i.removeEventListener("playing",n),m()};i.addEventListener("loadedmetadata",n,{once:!0}),i.addEventListener("playing",n,{once:!0}),i.readyState>=2&&m()}),!i)return;const g=window.faceapi,u=()=>({width:window.innerWidth,height:window.innerHeight}),b=async()=>{try{if(!a)return;if(!i.videoWidth){h();return}if(r&&i.paused){const A=()=>{i.muted=!0,i.play().catch(()=>{}),window.removeEventListener("touchstart",A),window.removeEventListener("click",A)};window.addEventListener("touchstart",A,{passive:!0}),window.addEventListener("click",A)}const m=(getComputedStyle(i).transform||"").includes("matrix(-1")||(i.style.transform||"").includes("scaleX(-1)"),n=new g.TinyFaceDetectorOptions({inputSize:r?160:224,scoreThreshold:r?.35:.5});let p=window.faceapi.detectAllFaces(i,n).withFaceLandmarks();!r&&window.faceapi.nets.faceExpressionNet.isLoaded&&(p=p.withFaceExpressions());const v=await p,j=u(),y=j.width/i.videoWidth,S=j.height/i.videoHeight,E=(A,R=0)=>{const k=A*y;return m?j.width-(k+R):k},P=A=>A*S;v&&v.length?v.forEach(A=>{var I;const R=A.detection.box,k=((I=A.landmarks)==null?void 0:I.positions)||[];if(k.length===68){const L=k[30],ae=[36,37,38,39,40,41],ne=[42,43,44,45,46,47],K=T=>T.reduce(($,X)=>$+X,0)/T.length,M=T=>({x:K(T.map($=>k[$].x)),y:K(T.map($=>k[$].y))}),z=M(ae),q=M(ne),B={x:(z.x+q.x)/2,y:(z.y+q.y)/2},H={x:E(B.x),y:P(B.y)},J=q.x-z.x,x=q.y-z.y;let w=Math.atan2(x,J)*180/Math.PI;const U=Math.hypot(J,x)||1;let C=(L.x-B.x)/U*60,Y=-(L.y-B.y)/U*50;m&&(C=-C,w=-w);const N=(T,$,X)=>Math.max($,Math.min(X,T));C=N(C,-60,60),Y=N(Y,-50,50),w=N(w,-45,45);const F=E(B.x),D=P(B.y)+R.height*S*.1,O=F/j.width,Re=D/j.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:O,y:Re,detected:!0}}));const oe=.25,_=d.current,W={x:_.x+(Y-_.x)*oe,y:_.y+(C-_.y)*oe,z:_.z+(w-_.z)*oe};d.current=W;const re=document.getElementById("camera"),G=document.getElementById("head-cube");if(re&&G){const T=re.getObject3D&&re.getObject3D("camera");if(T&&window.THREE){const $=window.THREE,X=H.x/j.width*2-1,Ee=-(H.y/j.height*2-1),Ae=1.2,ie=new $.Vector3,me=new $.Vector3,ge=new $.Vector3(X,Ee,.5);ge.unproject(T),ie.copy(T.position),me.copy(ge).sub(ie).normalize();const ce=ie.clone().add(me.multiplyScalar(Ae)),le=.35,V=t.current,Z={x:V.x+(ce.x-V.x)*le,y:V.y+(ce.y-V.y)*le,z:V.z+(ce.z-V.z)*le};t.current=Z,G.setAttribute("position",`${Z.x.toFixed(3)} ${Z.y.toFixed(3)} ${Z.z.toFixed(3)}`),G.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}else G.setAttribute&&G.setAttribute("rotation",`${W.x.toFixed(2)} ${W.y.toFixed(2)} ${W.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(m){console.error("FaceTracker detect error:",m)}h()},h=()=>{r?setTimeout(()=>{s.current=requestAnimationFrame(b)},80):s.current=requestAnimationFrame(b)};s.current=requestAnimationFrame(b)}return a?o().catch(i=>{console.error("FaceTracker start error:",i)}):s.current&&(cancelAnimationFrame(s.current),s.current=null),()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null)}},[a]),null},we=f.forwardRef(({className:a="",onSceneReady:s},l)=>{const d=f.useRef(null),[t,r]=f.useState(!1);return f.useEffect(()=>{const c=()=>{const o=document.querySelector("a-scene#ar-scene-main");o?(d.current=o,r(!0),s&&s(),requestAnimationFrame(()=>{const i=document.querySelector(".a-enter-vr-button");i&&(i.style.display="none",i.style.visibility="hidden")})):setTimeout(c,100)};c()},[s]),f.useImperativeHandle(l,()=>({addEntity:c=>{const o=d.current||document.querySelector("a-scene#ar-scene-main");if(o){const i=document.createElement("a-entity");return Object.keys(c).forEach(g=>{i.setAttribute(g,typeof c[g]=="object"?Object.entries(c[g]).map(([u,b])=>`${u}: ${b}`).join("; "):c[g])}),i.id=`entity-${Date.now()}`,o.appendChild(i),i.id}return""},removeEntity:c=>{const o=document.getElementById(c);o&&o.remove()},getScene:()=>d.current||document.querySelector("a-scene#ar-scene-main"),captureScreenshot:()=>{const c=d.current||document.querySelector("a-scene#ar-scene-main");if(c){const o=c.renderer;if(o&&o.domElement)return o.domElement.toDataURL("image/png")}return""},setCameraFacing:c=>{console.log("Camera facing changed to:",c)}}),[]),e.jsx("div",{className:`ar-scene-aframe ${a}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:t&&document.querySelector("a-scene#ar-scene-main")?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Aguardando A-Frame..."})})});we.displayName="ARSceneAFrame";const ke=f.createContext(void 0),_e=()=>{const a=f.useContext(ke);if(a===void 0)throw new Error("useRA deve ser usado dentro de um RAProvider");return a},Ve=({children:a})=>{const[s,l]=f.useState(null),[d,t]=f.useState(!0),[r,c]=f.useState(null),o=async()=>{var u,b;try{t(!0),c(null),console.log("üîÑ Carregando dados do RA...");const h=((b=(u=import.meta)==null?void 0:u.env)==null?void 0:b.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),n=`${h&&h!=="/"?h.endsWith("/")?h:h+"/":"/"}assets/data/ra.json`,p=await fetch(n);if(!p.ok)throw new Error(`Erro ao carregar dados: ${p.status}`);const v=await p.json();console.log("‚úÖ Dados do RA carregados:",v),l(v)}catch(h){const m=h instanceof Error?h.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",m),c(m)}finally{t(!1)}},i=()=>{o()};f.useEffect(()=>{o()},[]);const g={raData:s,loading:d,error:r,refreshData:i};return e.jsx(ke.Provider,{value:g,children:a})};const He=()=>{const{raData:a}=_e(),s=(a==null?void 0:a.configuracoes)||{},l=s.usarAFrame!==!1,d=s.usarVideo!==!1,t=s.usarFaceTracking!==!1,r=s.markerType||"pattern",c=s.markerUrl||(r==="nft"?"/assets/images/image-marker/imagem":"https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/data/data/patt.hiro"),o=s.markerImageUrl||"https://jeromeetienne.github.io/AR.js/data/images/HIRO.jpg",[i,g]=f.useState(!0),u=f.useRef(null),b=f.useRef(null);return f.useEffect(()=>{if(!d){g(!1);return}async function h(){try{const m=document.getElementById("arjs-video");if(!m||!m.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(v=>setTimeout(v,1e3));const p=document.getElementById("arjs-video");if(!p||!p.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),g(!1);return}}const n=m||document.getElementById("arjs-video");n&&n.srcObject?(n.classList.add("ar-video-visible"),u.current=n,b.current=n.srcObject,g(!1)):(console.error("V√≠deo n√£o tem stream"),g(!1))}catch(m){console.error("Erro ao configurar c√¢mera:",m),g(!1)}}return h(),()=>{}},[d]),f.useEffect(()=>{if(!l)return;const h=document.querySelector("a-scene#ar-scene-main");if(!h){console.warn("A-Frame Scene n√£o encontrado");return}if(!h.hasAttribute("arjs")){const j=r==="nft"?"trackingMethod: best; sourceType: webcam; debugUIEnabled: false;":"trackingMethod: best; sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; cameraParametersUrl: https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/data/data/camera_para.dat; maxDetectionRate: 60; canvasWidth: 640; canvasHeight: 480;";if(h.setAttribute("arjs",j),r==="nft"){const y=h.getAttribute("renderer"),S=typeof y=="string"?y:typeof y=="object"&&y!==null?Object.entries(y).map(([P,A])=>`${P}: ${A}`).join("; "):"",E=S.includes("logarithmicDepthBuffer")?S.replace(/logarithmicDepthBuffer:\s*(true|false)/,"logarithmicDepthBuffer: true"):`${S?S+"; ":""}logarithmicDepthBuffer: true`;h.setAttribute("renderer",E)}console.log(`‚úÖ AR.js configurado no scene (${r.toUpperCase()} mode)`)}let m=document.getElementById("camera");m||(m=document.createElement("a-entity"),m.id="camera",m.setAttribute("camera","active: true; fov: 60; near: 0.1; far: 10000"),m.setAttribute("look-controls","enabled: false"),m.setAttribute("wasd-controls","enabled: false"),m.setAttribute("position","0 1.6 0"),h.appendChild(m));let n=h.querySelector("#ambient-light");n||(n=document.createElement("a-entity"),n.id="ambient-light",n.setAttribute("light","type: ambient; color: #888"),h.appendChild(n));let p=h.querySelector("#directional-light");p||(p=document.createElement("a-entity"),p.id="directional-light",p.setAttribute("light","type: directional; color: #fff; intensity: 0.6"),p.setAttribute("position","1 1 1"),h.appendChild(p));let v=document.getElementById("image-marker");if(!v){r==="nft"?(v=document.createElement("a-nft"),v.id="image-marker",v.setAttribute("type","nft"),v.setAttribute("url",c),v.setAttribute("smooth","true"),v.setAttribute("smoothCount","10"),v.setAttribute("smoothTolerance",".01"),v.setAttribute("smoothThreshold","5")):(v=document.createElement("a-marker"),v.id="image-marker",v.setAttribute("type","pattern"),v.setAttribute("url",c),v.setAttribute("smooth","true"),v.setAttribute("smoothCount","10"),v.setAttribute("smoothTolerance","0.01"),v.setAttribute("smoothThreshold","5"));const j=document.createElement("a-box");j.setAttribute("position","0 0.5 0"),j.setAttribute("rotation","0 45 45"),j.setAttribute("color","#4CC3D9"),j.setAttribute("width","1"),j.setAttribute("height","1"),j.setAttribute("depth","1"),j.setAttribute("animation","property: rotation; to: 0 405 45; loop: true; dur: 10000");const y=document.createElement("a-animation");y.setAttribute("attribute","scale"),y.setAttribute("dur","2000"),y.setAttribute("repeat","indefinite"),y.setAttribute("from","1 1 1"),y.setAttribute("to","1.2 1.2 1.2"),y.setAttribute("direction","alternate"),j.appendChild(y),v.appendChild(j),h.appendChild(v),console.log(`‚úÖ Image tracking marker adicionado (${r.toUpperCase()}) - Mostre o marker na c√¢mera`),console.log(`üìÑ Marker Image: ${o}`),console.log(`üîó Marker URL: ${c}`),r==="nft"&&console.log("üì¶ NFT Marker: Certifique-se de que os arquivos .iset, .fset e .fset3 est√£o no mesmo diret√≥rio")}return()=>{const j=document.getElementById("camera");j&&j.remove();const y=h.querySelector("#ambient-light");y&&y.remove();const S=h.querySelector("#directional-light");S&&S.remove();const E=document.getElementById("image-marker");E&&E.remove()}},[l,r,c,o]),e.jsxs("div",{className:"ar-game-screen",children:[i&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),l&&e.jsx(we,{}),t&&e.jsx(qe,{enabled:!0})]})};const Je=({onNavigate:a})=>{const[s,l]=f.useState(null);f.useEffect(()=>{const u=(b=0)=>{const h=localStorage.getItem("ar-result");console.log(`Tentativa ${b+1}: resultado no localStorage =`,h),console.log("Todos os itens:",{result:localStorage.getItem("ar-result"),score:localStorage.getItem("ar-score"),progress:localStorage.getItem("ar-progress")}),h==="acerto"||h==="erro"?l(h):b<5?setTimeout(()=>u(b+1),100):(console.error("Resultado n√£o encontrado no localStorage ap√≥s m√∫ltiplas tentativas, voltando para cover"),a("cover","zoom-in","left"))};u(0)},[a]);const t=(()=>{var h,m;const u=((m=(h=import.meta)==null?void 0:h.env)==null?void 0:m.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),b=u&&u!=="/"?u.endsWith("/")?u:u+"/":"/";return b==="/"?"":b.endsWith("/")?b.slice(0,-1):b})(),r=u=>{if(t==="")return u.startsWith("/")?u:`/${u}`;const b=u.startsWith("/")?u.slice(1):u;return`${t}/${b}`},c={bgCapa:r("assets/images/bg-capa.png"),modalAcerto:r("assets/images/modal-acerto.png"),modalErro:r("assets/images/modal-erro.png"),btnRegistrar:r("assets/images/btn-registrar.png"),btnInicio:r("assets/images/btn-inicio.png"),btnVoltar:r("assets/images/btn-voltar.png")},o=()=>{a("selfie","fade","up")},i=()=>{a("cover","zoom-in","left")},g=()=>{a("ar","fade","left")};return s?e.jsx("div",{className:"result-screen",style:{backgroundImage:`url("${c.bgCapa}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsxs("div",{className:"result-content",children:[e.jsx("img",{src:s==="acerto"?c.modalAcerto:c.modalErro,alt:s==="acerto"?"Acerto":"Erro",className:"result-modal-image"}),s==="acerto"&&e.jsxs("div",{className:"result-modal-buttons",children:[e.jsx("button",{className:"result-button result-button-registrar",onClick:o,style:{backgroundImage:`url(${c.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"result-button result-button-inicio",onClick:i,style:{backgroundImage:`url(${c.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),s==="erro"&&e.jsx("div",{className:"result-modal-buttons",children:e.jsx("button",{className:"result-button result-button-voltar",onClick:g,style:{backgroundImage:`url(${c.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})}):null},ue={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},Ye=({onNavigate:a,onSettingsChange:s})=>{const[l,d]=f.useState(ue),t=(o,i)=>{const g={...l,[o]:i};d(g),s==null||s(g)},r=()=>{a("ar")},c=()=>{d(ue),s==null||s(ue)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:r,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:l.quality,onChange:o=>t("quality",o.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:l.enableSound,onChange:o=>t("enableSound",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:l.enableVibration,onChange:o=>t("enableVibration",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:l.autoSave,onChange:o=>t("autoSave",o.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:l.language,onChange:o=>t("language",o.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:c,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:r,children:"Salvar"})]})]})},Ge=({onNavigate:a,appName:s="Realidade Aumentada",version:l="1.0.0",description:d="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:t="Desenvolvedor AR"})=>{const r=()=>{a("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:r,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:s}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",l]}),e.jsx("p",{className:"app-description",children:d})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:r,children:"Voltar ao In√≠cio"})})]})},Xe=({onNavigate:a})=>{const s=()=>{a("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:s,children:"Jogar Novamente"})})]})})};const Qe=()=>{const a=f.useRef(null),s=f.useRef(null),l=f.useRef(null),d=f.useRef(null),[t,r]=f.useState(!1),o=(()=>{var p,v;const m=((v=(p=import.meta)==null?void 0:p.env)==null?void 0:v.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),n=m&&m!=="/"?m.endsWith("/")?m:m+"/":"/";return n==="/"?"":n.endsWith("/")?n.slice(0,-1):n})(),i=m=>{if(o==="")return m.startsWith("/")?m:`/${m}`;const n=m.startsWith("/")?m.slice(1):m;return`${o}/${n}`},g=i("assets/images/selfie-top.png"),u=i("assets/images/selfie-bottom.png"),b=i("assets/images/camera-icon.png");f.useEffect(()=>{async function m(){try{let n=document.getElementById("selfie-video");if(n&&n.srcObject){n.classList.add("selfie-video-visible"),a.current=n;return}const p=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});n||(n=document.createElement("video"),n.setAttribute("id","selfie-video"),n.setAttribute("playsinline",""),n.setAttribute("autoplay",""),n.muted=!0,n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.objectFit="cover",n.style.zIndex="0",n.classList.add("selfie-video-visible"),document.body.appendChild(n)),n.srcObject=p,s.current=p,a.current=n,await n.play()}catch(n){console.error("Erro ao inicializar c√¢mera:",n)}}return m(),()=>{}},[]),f.useEffect(()=>{(()=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{l.current=n},n.onerror=()=>{console.warn("Erro ao carregar imagem top")},n.src=g;const p=new Image;p.crossOrigin="anonymous",p.onload=()=>{d.current=p},p.onerror=()=>{console.warn("Erro ao carregar imagem bottom")},p.src=u})()},[g,u]);const h=async()=>{if(!(!a.current||t)){r(!0);try{const m=a.current,n=document.createElement("canvas");n.width=window.innerWidth,n.height=window.innerHeight;const p=n.getContext("2d");if(!p){r(!1);return}const v=(m.videoWidth||m.clientWidth)/(m.videoHeight||m.clientHeight),j=n.width/n.height;let y=n.width,S=n.height,E=0,P=0;if(v>j?(S=n.width/v,P=(n.height-S)/2):(y=n.height*v,E=(n.width-y)/2),p.drawImage(m,E,P,y,S),await(()=>new Promise(R=>{if(l.current&&d.current)R();else{const k=setInterval(()=>{l.current&&d.current&&(clearInterval(k),R())},50);setTimeout(()=>{clearInterval(k),R()},2e3)}}))(),l.current){const R=l.current,k=R.naturalWidth/R.naturalHeight,I=n.width/k;p.drawImage(R,0,0,n.width,I)}if(d.current){const R=d.current,k=R.naturalWidth/R.naturalHeight,I=n.width/k;p.drawImage(R,0,n.height-I,n.width,I)}n.toBlob(async R=>{if(R)try{if(navigator.share&&navigator.canShare){const k=new File([R],`selfie-${Date.now()}.png`,{type:"image/png"});if(navigator.canShare({files:[k]}))await navigator.share({files:[k],title:"Minha Selfie",text:"Confira minha selfie!"});else{const I=URL.createObjectURL(R);await navigator.share({title:"Minha Selfie",text:"Confira minha selfie!",url:I}),URL.revokeObjectURL(I)}}else{const k=URL.createObjectURL(R),I=document.createElement("a");I.href=k,I.download=`selfie-${Date.now()}.png`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(k)}}catch(k){if(k instanceof Error&&k.name!=="AbortError"){console.error("Erro ao compartilhar:",k);const I=URL.createObjectURL(R),L=document.createElement("a");L.href=I,L.download=`selfie-${Date.now()}.png`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(I)}}r(!1)},"image/png")}catch(m){console.error("Erro ao capturar foto:",m),r(!1)}}};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:g,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:u,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:h,disabled:t,style:{backgroundImage:`url(${b})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const Ke=({initialScreen:a="loading",appConfig:s,defaultTransition:l="zoom-out",defaultDirection:d="right"})=>{const[t,r]=f.useState(a||"loading"),[c,o]=f.useState(!1),[i,g]=f.useState(l),[u,b]=f.useState(d),[h,m]=f.useState(null);f.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",t)},[]),f.useEffect(()=>{if(!c){const y=setTimeout(()=>{t!=="loading"&&m(null)},1e3);return()=>clearTimeout(y)}},[t,c]);const n=(y,S)=>{const E=["loading","cover","tutorial","rocket","tutorial2","ar","resultado","final","settings","about","selfie"],P=E.indexOf(y),A=E.indexOf(S);return A>P?"right":A<P?"left":"right"},p=(y,S,E)=>{const P=S||i,A=E||n(t,y);m(t),g(P),b(A);const R=t==="loading"?800:300;o(!0),setTimeout(()=>{r(y),o(!1)},R)},v=()=>{switch(t){case"loading":return e.jsx(be,{onNavigate:p});case"cover":return e.jsx(Oe,{onNavigate:p,title:s.title,subtitle:s.subtitle});case"tutorial":return e.jsx(Me,{onNavigate:p});case"rocket":return e.jsx(We,{onNavigate:p});case"tutorial2":return e.jsx(De,{onNavigate:p});case"ar":return e.jsx(He,{onNavigate:p});case"resultado":return e.jsx(Je,{onNavigate:p});case"final":return e.jsx(Xe,{onNavigate:p});case"settings":return e.jsx(Ye,{onNavigate:p});case"about":return e.jsx(Ge,{onNavigate:p});case"selfie":return e.jsx(Qe,{onNavigate:p});default:return e.jsx(be,{onNavigate:p})}},j=()=>{const y="screen-manager",S=`transition-${i}`,E=`direction-${u}`,P=c?"transitioning":"",A=h?`from-${h}`:"";return`${y} ${S} ${E} ${P} ${A}`.trim()};return e.jsx("div",{className:j(),children:v()})},Ze=()=>{const[a,s]=f.useState(!1),l=()=>{const d=window.innerWidth,t=window.innerHeight,r=d>t,c=navigator.userAgent.toLowerCase(),o=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(c)||"ontouchstart"in window||navigator.maxTouchPoints>0,i=d<=768;o&&r||i&&r?(s(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(s(!1),document.body.style.overflow="",document.body.style.touchAction="")};return f.useEffect(()=>{l();let d,t;const r=()=>{clearTimeout(d),d=setTimeout(()=>{l()},100)},c=()=>{clearTimeout(t),t=setTimeout(()=>{l()},300)},o=()=>{clearTimeout(t),t=setTimeout(()=>{l()},300)},i=b=>{clearTimeout(t),t=setTimeout(()=>{l()},100)};window.addEventListener("resize",r),window.addEventListener("orientationchange",c),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",o);const g=window.matchMedia("(orientation: landscape)");g.addEventListener("change",i);const u=setInterval(()=>{l()},2e3);return()=>{clearTimeout(d),clearTimeout(t),clearInterval(u),window.removeEventListener("resize",r),window.removeEventListener("orientationchange",c),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",o),g.removeEventListener("change",i),document.body.style.overflow="",document.body.style.touchAction=""}},[]),a?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function fe(){const a={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(Ve,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Ze,{}),e.jsx(Ke,{initialScreen:"loading",appConfig:a})]})})}ye().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),te.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(fe,{})}))}).catch(a=>{console.error("Erro na inicializa√ß√£o global:",a),te.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(fe,{})}))});
//# sourceMappingURL=index-fc2af469.js.map
