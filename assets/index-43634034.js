import{r as b,a as Ae,R as he}from"./vendor-b1791c80.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function c(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?d.credentials="include":t.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(t){if(t.ep)return;t.ep=!0;const d=c(t);fetch(t.href,d)}})();var ve={exports:{}},ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ie=b,Ne=Symbol.for("react.element"),Ue=Symbol.for("react.fragment"),Te=Object.prototype.hasOwnProperty,Fe=Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pe={key:!0,ref:!0,__self:!0,__source:!0};function ye(s,a,c){var l,t={},d=null,i=null;c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(i=a.ref);for(l in a)Te.call(a,l)&&!Pe.hasOwnProperty(l)&&(t[l]=a[l]);if(s&&s.defaultProps)for(l in a=s.defaultProps,a)t[l]===void 0&&(t[l]=a[l]);return{$$typeof:Ne,type:s,key:d,ref:i,props:t,_owner:Fe.current}}ie.Fragment=Ue;ie.jsx=ye;ie.jsxs=ye;ve.exports=ie;var e=ve.exports,re={},be=Ae;re.createRoot=be.createRoot,re.hydrateRoot=be.hydrateRoot;let K=null,ue=null,oe=null;async function Ce(){var s,a;try{const c=((a=(s=import.meta)==null?void 0:s.env)==null?void 0:a.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),t=`${c&&c!=="/"?c.endsWith("/")?c:c+"/":"/"}assets/data/ra.json`,d=await fetch(t);return d.ok?(await d.json()).configuracoes||{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0}:(console.warn("N√£o foi poss√≠vel carregar ra.json, usando configura√ß√µes padr√£o"),{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0})}catch(c){return console.warn("Erro ao carregar configura√ß√µes do RA, usando padr√£o:",c),{usarAFrame:!0,usarVideo:!0,usarFaceTracking:!0}}}async function je(){return oe||(oe=(async()=>{try{console.log("Iniciando inicializa√ß√£o global...");const s=await Ce();console.log("Configura√ß√µes do RA:",s),s.usarAFrame!==!1?(console.log("Aguardando A-Frame..."),await ze(),console.log("A-Frame pronto"),console.log("Inicializando A-Frame Scene..."),await Be(),console.log("A-Frame Scene inicializado"),we()):console.log("A-Frame desabilitado nas configura√ß√µes"),s.usarVideo!==!1?(console.log(`Inicializando c√¢mera (${s.cameraFacing||"user"})...`),await Le(s),console.log("C√¢mera inicializada")):console.log("V√≠deo desabilitado nas configura√ß√µes"),s.usarFaceTracking!==!1?(console.log("Carregando face-api.js..."),await $e(),console.log("face-api.js carregado")):console.log("Face Tracking desabilitado nas configura√ß√µes"),console.log("Inicializa√ß√£o global conclu√≠da")}catch(s){throw console.error("Erro na inicializa√ß√£o global:",s),s}})(),oe)}function we(){const s=new MutationObserver(()=>{const a=document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]')||document.querySelector('[class*="permission"]');a&&(console.log("Modal detectado, garantindo que seja clic√°vel..."),a.style.pointerEvents="auto",a.style.zIndex="2147483647",a.style.position="fixed",a.style.display="block",a.style.visibility="visible",a.style.opacity="1",a.querySelectorAll("*").forEach(t=>{t.style.pointerEvents="auto"}),a.querySelectorAll("button").forEach(t=>{t.style.pointerEvents="auto",t.style.cursor="pointer",t.style.zIndex="2147483647",t.style.position="relative"}))});s.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),setTimeout(()=>{(document.querySelector(".a-orientation-modal")||document.querySelector('[class*="orientation-modal"]')||document.querySelector('[class*="a-orientation"]'))&&(s.disconnect(),we())},1e3)}function ze(){return new Promise(s=>{if(typeof window<"u"&&window.AFRAME){s();return}const a=()=>{typeof window<"u"&&window.AFRAME?s():setTimeout(a,100)};a()})}async function Le(s){try{const a=document.getElementById("arjs-video");if(a&&a.srcObject)return K=a,ue=a.srcObject,ue;const c=(s==null?void 0:s.cameraFacing)||"user",l=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:c}},audio:!1});if(a)K=a,s!=null&&s.espelharVideo?K.style.transform="scaleX(-1)":K.style.transform="none";else{const t=document.createElement("video");t.id="arjs-video",t.setAttribute("playsinline",""),t.setAttribute("autoplay",""),t.muted=!0,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.objectFit="cover",t.style.zIndex="0",t.style.display="none",t.style.visibility="hidden",t.style.opacity="0",s!=null&&s.espelharVideo?t.style.transform="scaleX(-1)":t.style.transform="none",document.body.appendChild(t),K=t}return K.srcObject=l,ue=l,await K.play(),l}catch(a){return console.warn("Erro ao inicializar c√¢mera global:",a),null}}async function $e(){if(!window.faceapi)return new Promise((s,a)=>{const c=document.createElement("script");c.src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",c.onload=()=>{console.log("face-api.js carregado"),s()},c.onerror=()=>a(new Error("Failed to load face-api.js")),document.head.appendChild(c)})}async function Be(){if(document.querySelector("a-scene")){console.log("A-Frame Scene j√° existe");return}const s=document.createElement("a-scene");s.id="ar-scene-main",s.setAttribute("embedded","true"),s.setAttribute("vr-mode-ui","enabled: false"),s.setAttribute("device-orientation-permission-ui","enabled: true"),s.setAttribute("renderer","alpha: true; antialias: true; colorManagement: true; physicallyCorrectLights: false; sortObjects: true; logarithmicDepthBuffer: false; precision: mediump;"),s.setAttribute("webxr","enabled: false"),s.setAttribute("background","transparent: true"),s.setAttribute("stats","false"),s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.zIndex="-100",s.style.background="transparent",document.body.appendChild(s),await new Promise(a=>{const c=()=>{const l=document.querySelector("a-scene");l&&l.hasLoaded?a():setTimeout(c,100)};c()}),console.log("A-Frame Scene criado e inicializado")}const fe=({onNavigate:s,onLoadingComplete:a})=>{const[c,l]=b.useState(0),[t,d]=b.useState("Inicializando...");return b.useEffect(()=>((async()=>{const n=["/assets/images/bg-capa.png","/assets/images/header-capa.png","/assets/images/bottom-capa.png","/assets/images/btn-jogar.png","/assets/images/tutorial-panel.png","/assets/images/btn-comecar.png","/assets/images/sprites/nave.png","/assets/images/sprites/estrela.png","/assets/images/sprites/cometa.png","/assets/images/sprites/barra-progresso.png","/assets/images/sprites/contador.png","/assets/images/sprites/feedback-acerto.png","/assets/images/sprites/feedback-erro.png","/assets/images/modal-acerto.png","/assets/images/modal-erro.png","/assets/images/btn-registrar.png","/assets/images/btn-inicio.png","/assets/images/btn-voltar.png","/assets/images/Titulo.png","/assets/images/btJogar.png","/assets/images/btCreditos.png","/assets/images/SKY.jpg","/assets/images/mascara.png","/assets/data/ra.json","/assets/images/foguete-top.png","/assets/images/foguete-bottom.png","/assets/images/foguete-montagem.png","/assets/images/btn-jogar-foguete.png","/assets/images/btn-jogar-foguete-disable.png","/assets/images/btn-next.png","/assets/images/btn-back.png","/assets/images/pecas/ponta/01.png","/assets/images/pecas/ponta/02.png","/assets/images/pecas/ponta/03.png","/assets/images/pecas/corpo/01.png","/assets/images/pecas/corpo/02.png","/assets/images/pecas/corpo/03.png","/assets/images/pecas/janela/01.png","/assets/images/pecas/janela/02.png","/assets/images/pecas/janela/03.png","/assets/images/pecas/asa/01.png","/assets/images/pecas/asa/02.png","/assets/images/pecas/asa/03.png","/assets/images/pecas/jato/01.png","/assets/images/pecas/jato/02.png","/assets/images/pecas/jato/03.png","/assets/images/abas/01.png","/assets/images/abas/02.png","/assets/images/abas/03.png","/assets/images/abas/04.png","/assets/images/abas/05.png","/assets/images/abas/01-disable.png","/assets/images/abas/02-disable.png","/assets/images/abas/03-disable.png","/assets/images/abas/04-disable.png","/assets/images/abas/05-disable.png"],p=(()=>{var y,m;const u=((m=(y=import.meta)==null?void 0:y.env)==null?void 0:m.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/");return u&&u!=="/"?u.endsWith("/")?u:u+"/":"/"})();try{d("Aguardando inicializa√ß√£o..."),await je(),d("Carregando recursos...");for(let u=0;u<n.length;u++){const h=n[u],y=`${p}${h.startsWith("/")?h.slice(1):h}`;if(h.endsWith(".json"))try{if(!(await fetch(y)).ok)throw new Error(`Failed to load ${h}`)}catch(o){console.warn(`Failed to load ${h}:`,o)}else await new Promise(o=>{const f=new Image;f.onload=()=>o(f),f.onerror=()=>{console.warn(`Failed to load image: ${y}`),o(null)},f.src=y});const m=Math.round((u+1)/n.length*100);l(m)}d("Finalizando..."),await new Promise(u=>setTimeout(u,300)),l(100),d("Conclu√≠do!"),await new Promise(u=>setTimeout(u,200)),a==null||a(),s("cover","flip","left")}catch(u){console.error("Erro ao carregar recursos:",u),d("Erro ao carregar. Continuando..."),setTimeout(()=>{s("cover","flip","left")},1e3)}})(),()=>{}),[s,a]),e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:e.jsx("div",{className:"loading-spinner"})}),e.jsx("h2",{className:"loading-title",children:"Carregando"}),e.jsxs("div",{className:"loading-progress-container",children:[e.jsx("div",{className:"loading-progress-bar",children:e.jsx("div",{className:"loading-progress-fill",style:{width:`${c}%`}})}),e.jsxs("p",{className:"loading-percentage",children:[c,"%"]})]}),e.jsx("p",{className:"loading-status",children:t})]})})};const De=({onNavigate:s,backgroundImage:a})=>{const l=(()=>{var h,y;const p=((y=(h=import.meta)==null?void 0:h.env)==null?void 0:y.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),u=p&&p!=="/"?p.endsWith("/")?p:p+"/":"/";return u==="/"?"":u.endsWith("/")?u.slice(0,-1):u})(),t=p=>{if(l==="")return p.startsWith("/")?p:`/${p}`;const u=p.startsWith("/")?p.slice(1):p;return`${l}/${u}`},d=a||t("assets/images/bg-capa.png"),i=t("assets/images/header-capa.png"),n=t("assets/images/bottom-capa.png"),r=t("assets/images/btn-jogar.png");return e.jsxs("div",{className:"cover-screen",style:{backgroundImage:`url("${d}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"cover-header-image",children:e.jsx("img",{src:i,alt:"Header",className:"cover-header-img"})}),e.jsx("div",{className:"cover-content",children:e.jsx("button",{className:"cover-button-jogar",onClick:()=>s("tutorial","zoom-out","right"),style:{backgroundImage:`url(${r})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})}),e.jsx("div",{className:"cover-bottom-image",children:e.jsx("img",{src:n,alt:"Bottom",className:"cover-bottom-img"})})]})};const Me=({onNavigate:s})=>{const c=(()=>{var p,u;const n=((u=(p=import.meta)==null?void 0:p.env)==null?void 0:u.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),r=n&&n!=="/"?n.endsWith("/")?n:n+"/":"/";return r==="/"?"":r.endsWith("/")?r.slice(0,-1):r})(),l=n=>{if(c==="")return n.startsWith("/")?n:`/${n}`;const r=n.startsWith("/")?n.slice(1):n;return`${c}/${r}`},t=l("assets/images/bg-capa.png"),d=l("assets/images/tutorial-panel.png"),i=l("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:d,alt:"Tutorial Panel",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>s("ar","fade","right"),style:{backgroundImage:`url("${i}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})},Oe=({onNavigate:s})=>{const c=(()=>{var p,u;const n=((u=(p=import.meta)==null?void 0:p.env)==null?void 0:u.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),r=n&&n!=="/"?n.endsWith("/")?n:n+"/":"/";return r==="/"?"":r.endsWith("/")?r.slice(0,-1):r})(),l=n=>{if(c==="")return n.startsWith("/")?n:`/${n}`;const r=n.startsWith("/")?n.slice(1):n;return`${c}/${r}`},t=l("assets/images/bg-capa.png"),d=l("assets/images/tutorial-panel-2.png"),i=l("assets/images/btn-comecar.png");return e.jsxs("div",{className:"tutorial-screen",style:{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"tutorial-panel-container",children:e.jsx("img",{src:d,alt:"Tutorial Panel 2",className:"tutorial-panel-image"})}),e.jsx("div",{className:"tutorial-button-container",children:e.jsx("button",{className:"tutorial-button-comecar",onClick:()=>s("ar","fade","right"),style:{backgroundImage:`url("${i}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})};const We=({onNavigate:s,backgroundImage:a})=>{const[c,l]=b.useState(!0),[t,d]=b.useState(1),[i,n]=b.useState({ponta:1,corpo:0,janela:0,asa:0,jato:0}),r={1:"ponta",2:"corpo",3:"janela",4:"asa",5:"jato"},u=(()=>{var k,F;const g=((F=(k=import.meta)==null?void 0:k.env)==null?void 0:F.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),x=g&&g!=="/"?g.endsWith("/")?g:g+"/":"/";return x==="/"?"":x.endsWith("/")?x.slice(0,-1):x})(),h=g=>{if(u==="")return g.startsWith("/")?g:`/${g}`;const x=g.startsWith("/")?g.slice(1):g;return`${u}/${x}`},y=a||h("assets/images/bg-capa.png"),m=h("assets/images/foguete-top.png"),o=h("assets/images/foguete-bottom.png"),f=h("assets/images/foguete-montagem.png"),P=h("assets/images/btn-jogar-foguete.png"),$=h("assets/images/btn-jogar-foguete-disable.png"),U=h("assets/images/btn-next.png"),z=h("assets/images/btn-back.png"),I=(g,x)=>{if(x===0)return null;const k=x.toString().padStart(2,"0");return h(`assets/images/pecas/${g}/${k}.png`)},C=I("ponta",i.ponta),E=I("corpo",i.corpo),R=I("janela",i.janela),w=I("asa",i.asa),S=I("jato",i.jato),O=g=>h(`assets/images/abas/0${g}${t===g?"":"-disable"}.png`),Z=g=>{d(g);const x=r[g];i[x]===0&&x!=="ponta"&&n(F=>({...F,[x]:1}))},ee=()=>{const g=r[t],x=i[g];x===0?n(k=>({...k,[g]:1})):x<3&&n(k=>({...k,[g]:x+1}))},G=()=>{const g=r[t],x=i[g];x>1&&g!=="ponta"&&n(k=>({...k,[g]:x-1}))},X=r[t],A=i[X],T=A<3,N=A>1&&X!=="ponta",B=A>0?I(X,A):null,j=i.ponta>0&&i.corpo>0&&i.janela>0&&i.asa>0&&i.jato>0;return b.useEffect(()=>{(async()=>{const k=(()=>{var W,M;const v=((M=(W=import.meta)==null?void 0:W.env)==null?void 0:M.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),L=v&&v!=="/"?v.endsWith("/")?v:v+"/":"/";return L==="/"?"":L.endsWith("/")?L.slice(0,-1):L})(),F=v=>{if(k==="")return v.startsWith("/")?v:`/${v}`;const L=v.startsWith("/")?v.slice(1):v;return`${k}/${L}`},D=["/assets/images/foguete-top.png","/assets/images/foguete-bottom.png","/assets/images/foguete-montagem.png","/assets/images/btn-jogar-foguete.png","/assets/images/btn-jogar-foguete-disable.png","/assets/images/btn-next.png","/assets/images/btn-back.png","/assets/images/pecas/ponta/01.png","/assets/images/pecas/ponta/02.png","/assets/images/pecas/ponta/03.png","/assets/images/pecas/corpo/01.png","/assets/images/pecas/corpo/02.png","/assets/images/pecas/corpo/03.png","/assets/images/pecas/janela/01.png","/assets/images/pecas/janela/02.png","/assets/images/pecas/janela/03.png","/assets/images/pecas/asa/01.png","/assets/images/pecas/asa/02.png","/assets/images/pecas/asa/03.png","/assets/images/pecas/jato/01.png","/assets/images/pecas/jato/02.png","/assets/images/pecas/jato/03.png","/assets/images/abas/01.png","/assets/images/abas/02.png","/assets/images/abas/03.png","/assets/images/abas/04.png","/assets/images/abas/05.png","/assets/images/abas/01-disable.png","/assets/images/abas/02-disable.png","/assets/images/abas/03-disable.png","/assets/images/abas/04-disable.png","/assets/images/abas/05-disable.png"];try{const v=D.map(L=>new Promise(W=>{const M=new Image;M.onload=()=>W(),M.onerror=()=>{console.warn(`Failed to load image: ${L}`),W()},M.src=F(L)}));await Promise.all(v),l(!1)}catch(v){console.error("Erro ao carregar imagens:",v),l(!1)}})()},[]),c?e.jsx("div",{className:"rocket-screen rocket-loading-overlay",children:e.jsxs("div",{className:"rocket-loading-content",children:[e.jsx("div",{className:"rocket-loading-spinner"}),e.jsx("p",{className:"rocket-loading-text",children:"Carregando..."})]})}):e.jsxs("div",{className:"rocket-screen",style:{backgroundImage:`url("${y}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"rocket-top-image",children:e.jsx("img",{src:m,alt:"Foguete Top",className:"rocket-top-img"})}),e.jsx("div",{className:"rocket-tabs-container",children:[1,2,3,4,5].map(g=>e.jsx("button",{className:`rocket-tab ${t===g?"active":""}`,onClick:()=>Z(g),style:{backgroundImage:`url("${O(g)}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},g))}),e.jsxs("div",{className:"rocket-montagem-container",children:[e.jsx("img",{src:f,alt:"Foguete Montagem",className:"rocket-montagem-img"}),C&&e.jsx("img",{src:C,alt:"Ponta",className:"rocket-ponta"}),E&&e.jsx("img",{src:E,alt:"Corpo",className:"rocket-corpo"}),R&&e.jsx("img",{src:R,alt:"Janela",className:"rocket-janela"}),w&&e.jsx("img",{src:w,alt:"Asa",className:"rocket-asa"}),S&&e.jsx("img",{src:S,alt:"Jato",className:"rocket-jato"})]}),e.jsxs("div",{className:"rocket-bottom-image",children:[e.jsx("img",{src:o,alt:"Foguete Bottom",className:"rocket-bottom-img"}),B&&e.jsx("div",{className:"rocket-preview-container",children:e.jsx("img",{src:B,alt:`Preview ${X}`,className:"rocket-preview-image"})}),e.jsxs("div",{className:"rocket-navigation-buttons",children:[e.jsx("button",{className:"rocket-button-back",onClick:G,disabled:!N,style:{backgroundImage:`url("${z}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"rocket-button-jogar",onClick:()=>{try{localStorage.setItem("rocket-pieces",JSON.stringify(i)),console.log("‚úÖ Pe√ßas do foguete salvas:",i)}catch(g){console.error("‚ùå Erro ao salvar pe√ßas do foguete:",g)}s("tutorial2","fade","right")},disabled:!j,style:{backgroundImage:`url("${j?P:$}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"rocket-button-next",onClick:ee,disabled:!T,style:{backgroundImage:`url("${U}")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})]})]})},qe=({enabled:s})=>{const a=b.useRef(null),c=b.useRef(!1),l=b.useRef({x:0,y:0,z:0}),t=b.useRef({x:0,y:1,z:-1.2}),d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return b.useEffect(()=>{async function i(){if(c.current)return;const r=window.faceapi,p="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";d?await Promise.all([r.nets.tinyFaceDetector.loadFromUri(p),r.nets.faceLandmark68Net.loadFromUri(p)]):await Promise.all([r.nets.tinyFaceDetector.loadFromUri(p),r.nets.faceLandmark68Net.loadFromUri(p),r.nets.faceExpressionNet.loadFromUri(p)]),c.current=!0,console.log("Modelos de face-api carregados")}async function n(){if(!window.faceapi&&(console.warn("face-api.js n√£o carregado ainda, aguardando..."),await new Promise(m=>setTimeout(m,1e3)),!window.faceapi)){console.error("face-api.js ainda n√£o dispon√≠vel");return}await i();const r=document.getElementById("arjs-video");if(!r||!r.srcObject){console.warn("FaceTracker: v√≠deo global n√£o encontrado");return}if(r.readyState<2&&await new Promise(m=>{const o=()=>{r.removeEventListener("loadedmetadata",o),r.removeEventListener("playing",o),m()};r.addEventListener("loadedmetadata",o,{once:!0}),r.addEventListener("playing",o,{once:!0}),r.readyState>=2&&m()}),!r)return;const p=window.faceapi,u=()=>({width:window.innerWidth,height:window.innerHeight}),h=async()=>{try{if(!s)return;if(!r.videoWidth){y();return}if(d&&r.paused){const E=()=>{r.muted=!0,r.play().catch(()=>{}),window.removeEventListener("touchstart",E),window.removeEventListener("click",E)};window.addEventListener("touchstart",E,{passive:!0}),window.addEventListener("click",E)}const m=(getComputedStyle(r).transform||"").includes("matrix(-1")||(r.style.transform||"").includes("scaleX(-1)"),o=new p.TinyFaceDetectorOptions({inputSize:d?160:224,scoreThreshold:d?.35:.5});let f=window.faceapi.detectAllFaces(r,o).withFaceLandmarks();!d&&window.faceapi.nets.faceExpressionNet.isLoaded&&(f=f.withFaceExpressions());const P=await f,$=u(),U=$.width/r.videoWidth,z=$.height/r.videoHeight,I=(E,R=0)=>{const w=E*U;return m?$.width-(w+R):w},C=E=>E*z;P&&P.length?P.forEach(E=>{var S;const R=E.detection.box,w=((S=E.landmarks)==null?void 0:S.positions)||[];if(w.length===68){const O=w[30],Z=[36,37,38,39,40,41],ee=[42,43,44,45,46,47],G=_=>_.reduce((H,ae)=>H+ae,0)/_.length,X=_=>({x:G(_.map(H=>w[H].x)),y:G(_.map(H=>w[H].y))}),A=X(Z),T=X(ee),N={x:(A.x+T.x)/2,y:(A.y+T.y)/2},B={x:I(N.x),y:C(N.y)},j=T.x-A.x,g=T.y-A.y;let x=Math.atan2(g,j)*180/Math.PI;const k=Math.hypot(j,g)||1;let F=(O.x-N.x)/k*60,D=-(O.y-N.y)/k*50;m&&(F=-F,x=-x);const v=(_,H,ae)=>Math.max(H,Math.min(ae,_));F=v(F,-60,60),D=v(D,-50,50),x=v(x,-45,45);const L=I(N.x),W=C(N.y)+R.height*z*.1,M=L/$.width,Q=W/$.height;window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:M,y:Q,detected:!0}}));const J=.25,q=l.current,V={x:q.x+(D-q.x)*J,y:q.y+(F-q.y)*J,z:q.z+(x-q.z)*J};l.current=V;const te=document.getElementById("camera"),Y=document.getElementById("head-cube");if(te&&Y){const _=te.getObject3D&&te.getObject3D("camera");if(_&&window.THREE){const H=window.THREE,ae=B.x/$.width*2-1,Ee=-(B.y/$.height*2-1),Se=1.2,ce=new H.Vector3,ge=new H.Vector3,pe=new H.Vector3(ae,Ee,.5);pe.unproject(_),ce.copy(_.position),ge.copy(pe).sub(ce).normalize();const le=ce.clone().add(ge.multiplyScalar(Se)),de=.35,se=t.current,ne={x:se.x+(le.x-se.x)*de,y:se.y+(le.y-se.y)*de,z:se.z+(le.z-se.z)*de};t.current=ne,Y.setAttribute("position",`${ne.x.toFixed(3)} ${ne.y.toFixed(3)} ${ne.z.toFixed(3)}`),Y.setAttribute("rotation",`${V.x.toFixed(2)} ${V.y.toFixed(2)} ${V.z.toFixed(2)}`)}else Y.setAttribute&&Y.setAttribute("rotation",`${V.x.toFixed(2)} ${V.y.toFixed(2)} ${V.z.toFixed(2)}`)}}}):window.dispatchEvent(new CustomEvent("nave-position",{detail:{x:.5,y:.5,detected:!1}}))}catch(m){console.error("FaceTracker detect error:",m)}y()},y=()=>{d?setTimeout(()=>{a.current=requestAnimationFrame(h)},80):a.current=requestAnimationFrame(h)};a.current=requestAnimationFrame(h)}return s?n().catch(r=>{console.error("FaceTracker start error:",r)}):a.current&&(cancelAnimationFrame(a.current),a.current=null),()=>{a.current&&(cancelAnimationFrame(a.current),a.current=null)}},[s]),null},ke=b.forwardRef(({className:s="",onSceneReady:a},c)=>{const l=b.useRef(null),[t,d]=b.useState(!1);return b.useEffect(()=>{const i=()=>{const n=document.querySelector("a-scene#ar-scene-main");n?(l.current=n,d(!0),a&&a(),requestAnimationFrame(()=>{const r=document.querySelector(".a-enter-vr-button");r&&(r.style.display="none",r.style.visibility="hidden")})):setTimeout(i,100)};i()},[a]),b.useImperativeHandle(c,()=>({addEntity:i=>{const n=l.current||document.querySelector("a-scene#ar-scene-main");if(n){const r=document.createElement("a-entity");return Object.keys(i).forEach(p=>{r.setAttribute(p,typeof i[p]=="object"?Object.entries(i[p]).map(([u,h])=>`${u}: ${h}`).join("; "):i[p])}),r.id=`entity-${Date.now()}`,n.appendChild(r),r.id}return""},removeEntity:i=>{const n=document.getElementById(i);n&&n.remove()},getScene:()=>l.current||document.querySelector("a-scene#ar-scene-main"),captureScreenshot:()=>{const i=l.current||document.querySelector("a-scene#ar-scene-main");if(i){const n=i.renderer;if(n&&n.domElement)return n.domElement.toDataURL("image/png")}return""},setCameraFacing:i=>{console.log("Camera facing changed to:",i)}}),[]),e.jsx("div",{className:`ar-scene-aframe ${s}`,style:{width:"100%",height:"100%",position:"relative",zIndex:1},children:t&&document.querySelector("a-scene#ar-scene-main")?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#fff"},children:"Aguardando A-Frame..."})})});ke.displayName="ARSceneAFrame";const Re=b.createContext(void 0),Ve=()=>{const s=b.useContext(Re);if(s===void 0)throw new Error("useRA deve ser usado dentro de um RAProvider");return s},_e=({children:s})=>{const[a,c]=b.useState(null),[l,t]=b.useState(!0),[d,i]=b.useState(null),n=async()=>{var u,h;try{t(!0),i(null),console.log("üîÑ Carregando dados do RA...");const y=((h=(u=import.meta)==null?void 0:u.env)==null?void 0:h.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),o=`${y&&y!=="/"?y.endsWith("/")?y:y+"/":"/"}assets/data/ra.json`,f=await fetch(o);if(!f.ok)throw new Error(`Erro ao carregar dados: ${f.status}`);const P=await f.json();console.log("‚úÖ Dados do RA carregados:",P),c(P)}catch(y){const m=y instanceof Error?y.message:"Erro desconhecido";console.error("‚ùå Erro ao carregar dados do RA:",m),i(m)}finally{t(!1)}},r=()=>{n()};b.useEffect(()=>{n()},[]);const p={raData:a,loading:l,error:d,refreshData:r};return e.jsx(Re.Provider,{value:p,children:s})};const He=()=>{var z,I,C,E,R,w,S,O,Z,ee,G,X;const{raData:s}=Ve(),a=(s==null?void 0:s.configuracoes)||{},c=a.usarAFrame!==!1,l=a.usarVideo!==!1,t=a.usarFaceTracking!==!1,d=a.espelharVideo===!0,i=a.mostrarDebug===!0,n=a.markerType||"pattern",r=a.markerUrl||(n==="nft"?"/assets/images/image-marker/imagem":"https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/data/data/patt.hiro"),p=a.markerImageUrl||"https://jeromeetienne.github.io/AR.js/data/images/HIRO.jpg",[u,h]=b.useState(!0),[y,m]=b.useState(!1),[o,f]=b.useState({}),P=b.useRef(null),$=b.useRef(null),U=b.useRef(null);return b.useEffect(()=>{if(!l){h(!1);return}async function A(){try{const T=document.getElementById("arjs-video");if(!T||!T.srcObject){console.warn("V√≠deo global n√£o encontrado, aguardando..."),await new Promise(j=>setTimeout(j,1e3));const B=document.getElementById("arjs-video");if(!B||!B.srcObject){console.error("V√≠deo ainda n√£o dispon√≠vel"),h(!1);return}}const N=T||document.getElementById("arjs-video");N&&N.srcObject?(N.classList.add("ar-video-visible"),d?N.style.transform="scaleX(-1)":N.style.transform="none",P.current=N,$.current=N.srcObject,h(!1)):(console.error("V√≠deo n√£o tem stream"),h(!1))}catch(T){console.error("Erro ao configurar c√¢mera:",T),h(!1)}}return A(),()=>{}},[l,d]),b.useEffect(()=>{if(!c)return;const A=document.querySelector("a-scene#ar-scene-main");if(!A){console.warn("A-Frame Scene n√£o encontrado");return}if(!A.hasAttribute("arjs")){const g=n==="nft"?"trackingMethod: best; sourceType: webcam; debugUIEnabled: false;":"trackingMethod: best; sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; cameraParametersUrl: https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/data/data/camera_para.dat; maxDetectionRate: 60; canvasWidth: 640; canvasHeight: 480;";if(A.setAttribute("arjs",g),n==="nft"){const x=A.getAttribute("renderer"),k=typeof x=="string"?x:typeof x=="object"&&x!==null?Object.entries(x).map(([D,v])=>`${D}: ${v}`).join("; "):"",F=k.includes("logarithmicDepthBuffer")?k.replace(/logarithmicDepthBuffer:\s*(true|false)/,"logarithmicDepthBuffer: true"):`${k?k+"; ":""}logarithmicDepthBuffer: true`;A.setAttribute("renderer",F)}console.log(`‚úÖ AR.js configurado no scene (${n.toUpperCase()} mode)`)}let T=document.getElementById("camera");T||(T=document.createElement("a-entity"),T.id="camera",T.setAttribute("camera","active: true; fov: 60; near: 0.1; far: 10000"),T.setAttribute("look-controls","enabled: false"),T.setAttribute("wasd-controls","enabled: false"),T.setAttribute("position","0 1.6 0"),A.appendChild(T));let N=A.querySelector("#ambient-light");N||(N=document.createElement("a-entity"),N.id="ambient-light",N.setAttribute("light","type: ambient; color: #888"),A.appendChild(N));let B=A.querySelector("#directional-light");B||(B=document.createElement("a-entity"),B.id="directional-light",B.setAttribute("light","type: directional; color: #fff; intensity: 0.6"),B.setAttribute("position","1 1 1"),A.appendChild(B));let j=document.getElementById("image-marker");if(!j){n==="nft"?(j=document.createElement("a-nft"),j.id="image-marker",j.setAttribute("type","nft"),j.setAttribute("url",r),j.setAttribute("smooth","true"),j.setAttribute("smoothCount","10"),j.setAttribute("smoothTolerance",".01"),j.setAttribute("smoothThreshold","5")):(j=document.createElement("a-marker"),j.id="image-marker",j.setAttribute("type","pattern"),j.setAttribute("url",r),j.setAttribute("smooth","true"),j.setAttribute("smoothCount","10"),j.setAttribute("smoothTolerance","0.01"),j.setAttribute("smoothThreshold","5"));const g=document.createElement("a-box");g.setAttribute("position","0 0.5 0"),g.setAttribute("rotation","0 45 45"),g.setAttribute("color","#4CC3D9"),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("depth","1"),g.setAttribute("animation","property: rotation; to: 0 405 45; loop: true; dur: 10000");const x=document.createElement("a-animation");if(x.setAttribute("attribute","scale"),x.setAttribute("dur","2000"),x.setAttribute("repeat","indefinite"),x.setAttribute("from","1 1 1"),x.setAttribute("to","1.2 1.2 1.2"),x.setAttribute("direction","alternate"),g.appendChild(x),j.appendChild(g),A.appendChild(j),i){const k=()=>{var L,W,M,Q,J,q,V,te,Y;m(!0);const v=j.object3D;v&&f({position:{x:((L=v.position)==null?void 0:L.x)||0,y:((W=v.position)==null?void 0:W.y)||0,z:((M=v.position)==null?void 0:M.z)||0},rotation:{x:((Q=v.rotation)==null?void 0:Q.x)||0,y:((J=v.rotation)==null?void 0:J.y)||0,z:((q=v.rotation)==null?void 0:q.z)||0},scale:{x:((V=v.scale)==null?void 0:V.x)||1,y:((te=v.scale)==null?void 0:te.y)||1,z:((Y=v.scale)==null?void 0:Y.z)||1},visible:!0})},F=()=>{m(!1),f(D=>({...D,visible:!1}))};j.addEventListener("markerFound",k),j.addEventListener("found",k),j.addEventListener("arjs-video-loaded",k),j.addEventListener("markerLost",F),j.addEventListener("lost",F),U.current=setInterval(()=>{var L,W,M,Q,J,q;const D=j,v=D==null?void 0:D.object3D;v&&v.visible?(m(!0),f({position:{x:((L=v.position)==null?void 0:L.x)||0,y:((W=v.position)==null?void 0:W.y)||0,z:((M=v.position)==null?void 0:M.z)||0},rotation:{x:((Q=v.rotation)==null?void 0:Q.x)||0,y:((J=v.rotation)==null?void 0:J.y)||0,z:((q=v.rotation)==null?void 0:q.z)||0},visible:!0})):(m(!1),f(V=>({...V,visible:!1})))},100)}console.log(`‚úÖ Image tracking marker adicionado (${n.toUpperCase()}) - Mostre o marker na c√¢mera`),console.log(`üìÑ Marker Image: ${p}`),console.log(`üîó Marker URL: ${r}`),n==="nft"&&console.log("üì¶ NFT Marker: Certifique-se de que os arquivos .iset, .fset e .fset3 est√£o no mesmo diret√≥rio")}return()=>{U.current&&(clearInterval(U.current),U.current=null);const g=document.getElementById("camera");g&&g.remove();const x=A.querySelector("#ambient-light");x&&x.remove();const k=A.querySelector("#directional-light");k&&k.remove();const F=document.getElementById("image-marker");F&&F.remove()}},[c,n,r,p,i]),e.jsxs("div",{className:"ar-game-screen",children:[u&&e.jsx("div",{className:"ar-loading-overlay",children:e.jsxs("div",{className:"ar-loading-content",children:[e.jsx("div",{className:"ar-loading-spinner"}),e.jsx("p",{className:"ar-loading-text",children:"Preparando AR..."})]})}),i&&e.jsxs("div",{style:{position:"fixed",top:"10px",left:"10px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:"15px",borderRadius:"8px",fontFamily:"monospace",fontSize:"12px",zIndex:1e4,maxWidth:"300px",lineHeight:"1.6"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"10px",fontSize:"14px",borderBottom:"1px solid #555",paddingBottom:"5px"},children:"üîç DEBUG AR"}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Marker Type:"})," ",n.toUpperCase()]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Marker Status:"}),e.jsx("span",{style:{color:y?"#0f0":"#f00",marginLeft:"5px"},children:y?"‚úÖ DETECTADO":"‚ùå N√ÉO DETECTADO"})]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Video:"})," ",l?"‚úÖ":"‚ùå"]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Video Espelhado:"})," ",d?"‚úÖ SIM":"‚ùå N√ÉO"]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"AFrame:"})," ",c?"‚úÖ":"‚ùå"]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Face Tracking:"})," ",t?"‚úÖ":"‚ùå"]}),y&&o.visible&&e.jsxs("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #555"},children:[e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Position:"})," X:",((I=(z=o.position)==null?void 0:z.x)==null?void 0:I.toFixed(2))||"0"," Y:",((E=(C=o.position)==null?void 0:C.y)==null?void 0:E.toFixed(2))||"0"," Z:",((w=(R=o.position)==null?void 0:R.z)==null?void 0:w.toFixed(2))||"0"]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:"Rotation:"})," X:",((O=(S=o.rotation)==null?void 0:S.x)==null?void 0:O.toFixed(2))||"0"," Y:",((ee=(Z=o.rotation)==null?void 0:Z.y)==null?void 0:ee.toFixed(2))||"0"," Z:",((X=(G=o.rotation)==null?void 0:G.z)==null?void 0:X.toFixed(2))||"0"]})]}),e.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #555",fontSize:"10px",color:"#aaa"},children:e.jsxs("div",{children:["Marker URL: ",r]})})]}),c&&e.jsx(ke,{}),t&&e.jsx(qe,{enabled:!0})]})};const Xe=({onNavigate:s})=>{const[a,c]=b.useState(null);b.useEffect(()=>{const u=(h=0)=>{const y=localStorage.getItem("ar-result");console.log(`Tentativa ${h+1}: resultado no localStorage =`,y),console.log("Todos os itens:",{result:localStorage.getItem("ar-result"),score:localStorage.getItem("ar-score"),progress:localStorage.getItem("ar-progress")}),y==="acerto"||y==="erro"?c(y):h<5?setTimeout(()=>u(h+1),100):(console.error("Resultado n√£o encontrado no localStorage ap√≥s m√∫ltiplas tentativas, voltando para cover"),s("cover","zoom-in","left"))};u(0)},[s]);const t=(()=>{var y,m;const u=((m=(y=import.meta)==null?void 0:y.env)==null?void 0:m.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),h=u&&u!=="/"?u.endsWith("/")?u:u+"/":"/";return h==="/"?"":h.endsWith("/")?h.slice(0,-1):h})(),d=u=>{if(t==="")return u.startsWith("/")?u:`/${u}`;const h=u.startsWith("/")?u.slice(1):u;return`${t}/${h}`},i={bgCapa:d("assets/images/bg-capa.png"),modalAcerto:d("assets/images/modal-acerto.png"),modalErro:d("assets/images/modal-erro.png"),btnRegistrar:d("assets/images/btn-registrar.png"),btnInicio:d("assets/images/btn-inicio.png"),btnVoltar:d("assets/images/btn-voltar.png")},n=()=>{s("selfie","fade","up")},r=()=>{s("cover","zoom-in","left")},p=()=>{s("ar","fade","left")};return a?e.jsx("div",{className:"result-screen",style:{backgroundImage:`url("${i.bgCapa}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsxs("div",{className:"result-content",children:[e.jsx("img",{src:a==="acerto"?i.modalAcerto:i.modalErro,alt:a==="acerto"?"Acerto":"Erro",className:"result-modal-image"}),a==="acerto"&&e.jsxs("div",{className:"result-modal-buttons",children:[e.jsx("button",{className:"result-button result-button-registrar",onClick:n,style:{backgroundImage:`url(${i.btnRegistrar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e.jsx("button",{className:"result-button result-button-inicio",onClick:r,style:{backgroundImage:`url(${i.btnInicio})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),a==="erro"&&e.jsx("div",{className:"result-modal-buttons",children:e.jsx("button",{className:"result-button result-button-voltar",onClick:p,style:{backgroundImage:`url(${i.btnVoltar})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})})]})}):null},me={quality:"high",enableSound:!0,enableVibration:!0,autoSave:!0,language:"pt-BR"},Je=({onNavigate:s,onSettingsChange:a})=>{const[c,l]=b.useState(me),t=(n,r)=>{const p={...c,[n]:r};l(p),a==null||a(p)},d=()=>{s("ar")},i=()=>{l(me),a==null||a(me)};return e.jsxs("div",{className:"settings-screen",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("button",{className:"settings-back-button",onClick:d,children:"‚Üê Voltar"}),e.jsx("h1",{className:"settings-title",children:"Configura√ß√µes"})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Qualidade"}),e.jsxs("select",{value:c.quality,onChange:n=>t("quality",n.target.value),className:"settings-select",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"M√©dia"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Som"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.enableSound,onChange:n=>t("enableSound",n.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar som"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Vibra√ß√£o"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.enableVibration,onChange:n=>t("enableVibration",n.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Habilitar vibra√ß√£o"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Salvamento"}),e.jsxs("label",{className:"settings-toggle",children:[e.jsx("input",{type:"checkbox",checked:c.autoSave,onChange:n=>t("autoSave",n.target.checked)}),e.jsx("span",{className:"toggle-slider"}),"Salvar automaticamente"]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Idioma"}),e.jsxs("select",{value:c.language,onChange:n=>t("language",n.target.value),className:"settings-select",children:[e.jsx("option",{value:"pt-BR",children:"Portugu√™s"}),e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"es-ES",children:"Espa√±ol"})]})]})]}),e.jsxs("div",{className:"settings-footer",children:[e.jsx("button",{className:"settings-button secondary",onClick:i,children:"Restaurar Padr√µes"}),e.jsx("button",{className:"settings-button primary",onClick:d,children:"Salvar"})]})]})},Ye=({onNavigate:s,appName:a="Realidade Aumentada",version:c="1.0.0",description:l="Uma aplica√ß√£o inovadora de realidade aumentada desenvolvida com tecnologias modernas.",developer:t="Desenvolvedor AR"})=>{const d=()=>{s("cover")};return e.jsxs("div",{className:"about-screen",children:[e.jsxs("div",{className:"about-header",children:[e.jsx("button",{className:"about-back-button",onClick:d,children:"‚Üê Voltar"}),e.jsx("h1",{className:"about-title",children:"Sobre"})]}),e.jsxs("div",{className:"about-content",children:[e.jsxs("div",{className:"about-app-info",children:[e.jsx("h2",{className:"app-name",children:a}),e.jsxs("p",{className:"app-version",children:["Vers√£o ",c]}),e.jsx("p",{className:"app-description",children:l})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Desenvolvedor"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Tecnologias"}),e.jsxs("ul",{className:"tech-list",children:[e.jsx("li",{children:"React 18"}),e.jsx("li",{children:"TypeScript"}),e.jsx("li",{children:"A-Frame"}),e.jsx("li",{children:"AR.js"}),e.jsx("li",{children:"Vite"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Funcionalidades"}),e.jsxs("ul",{className:"features-list",children:[e.jsx("li",{children:"Renderiza√ß√£o 3D em tempo real"}),e.jsx("li",{children:"Adi√ß√£o de objetos 3D"}),e.jsx("li",{children:"Captura de screenshots"}),e.jsx("li",{children:"Interface responsiva"}),e.jsx("li",{children:"Suporte a gestos"})]})]}),e.jsxs("div",{className:"about-section",children:[e.jsx("h3",{children:"Licen√ßa"}),e.jsx("p",{children:"MIT License - C√≥digo aberto"})]})]}),e.jsx("div",{className:"about-footer",children:e.jsx("button",{className:"about-button",onClick:d,children:"Voltar ao In√≠cio"})})]})},Ge=({onNavigate:s})=>{const a=()=>{s("cover")};return e.jsx("div",{className:"final-screen",children:e.jsxs("div",{className:"final-content",children:[e.jsxs("div",{className:"final-header",children:[e.jsx("div",{className:"final-icon",children:"üéâ"}),e.jsx("h1",{className:"final-title",children:"Parab√©ns!"}),e.jsx("p",{className:"final-subtitle",children:"Voc√™ completou a experi√™ncia de Realidade Aumentada"})]}),e.jsxs("div",{className:"final-body",children:[e.jsx("div",{className:"final-message",children:e.jsx("p",{children:"Esperamos que voc√™ tenha aproveitado essa jornada interativa!"})}),e.jsx("div",{className:"final-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"‚úì"}),e.jsx("div",{className:"stat-label",children:"Experi√™ncia Completa"})]})})]}),e.jsx("div",{className:"final-footer",children:e.jsx("button",{className:"final-button primary",onClick:a,children:"Jogar Novamente"})})]})})};const Qe=()=>{const s=b.useRef(null),a=b.useRef(null),c=b.useRef(null),l=b.useRef(null),[t,d]=b.useState(!1),n=(()=>{var f,P;const m=((P=(f=import.meta)==null?void 0:f.env)==null?void 0:P.BASE_URL)||(document!=null&&document.baseURI?new URL(document.baseURI).pathname:"/"),o=m&&m!=="/"?m.endsWith("/")?m:m+"/":"/";return o==="/"?"":o.endsWith("/")?o.slice(0,-1):o})(),r=m=>{if(n==="")return m.startsWith("/")?m:`/${m}`;const o=m.startsWith("/")?m.slice(1):m;return`${n}/${o}`},p=r("assets/images/selfie-top.png"),u=r("assets/images/selfie-bottom.png"),h=r("assets/images/camera-icon.png");b.useEffect(()=>{async function m(){try{let o=document.getElementById("selfie-video");if(o&&o.srcObject){o.classList.add("selfie-video-visible"),s.current=o;return}const f=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"user"}},audio:!1});o||(o=document.createElement("video"),o.setAttribute("id","selfie-video"),o.setAttribute("playsinline",""),o.setAttribute("autoplay",""),o.muted=!0,o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.objectFit="cover",o.style.zIndex="0",o.classList.add("selfie-video-visible"),document.body.appendChild(o)),o.srcObject=f,a.current=f,s.current=o,await o.play()}catch(o){console.error("Erro ao inicializar c√¢mera:",o)}}return m(),()=>{}},[]),b.useEffect(()=>{(()=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{c.current=o},o.onerror=()=>{console.warn("Erro ao carregar imagem top")},o.src=p;const f=new Image;f.crossOrigin="anonymous",f.onload=()=>{l.current=f},f.onerror=()=>{console.warn("Erro ao carregar imagem bottom")},f.src=u})()},[p,u]);const y=async()=>{if(!(!s.current||t)){d(!0);try{const m=s.current,o=document.createElement("canvas");o.width=window.innerWidth,o.height=window.innerHeight;const f=o.getContext("2d");if(!f){d(!1);return}const P=(m.videoWidth||m.clientWidth)/(m.videoHeight||m.clientHeight),$=o.width/o.height;let U=o.width,z=o.height,I=0,C=0;if(P>$?(z=o.width/P,C=(o.height-z)/2):(U=o.height*P,I=(o.width-U)/2),f.drawImage(m,I,C,U,z),await(()=>new Promise(R=>{if(c.current&&l.current)R();else{const w=setInterval(()=>{c.current&&l.current&&(clearInterval(w),R())},50);setTimeout(()=>{clearInterval(w),R()},2e3)}}))(),c.current){const R=c.current,w=R.naturalWidth/R.naturalHeight,S=o.width/w;f.drawImage(R,0,0,o.width,S)}if(l.current){const R=l.current,w=R.naturalWidth/R.naturalHeight,S=o.width/w;f.drawImage(R,0,o.height-S,o.width,S)}o.toBlob(async R=>{if(R)try{if(navigator.share&&navigator.canShare){const w=new File([R],`selfie-${Date.now()}.png`,{type:"image/png"});if(navigator.canShare({files:[w]}))await navigator.share({files:[w],title:"Minha Selfie",text:"Confira minha selfie!"});else{const S=URL.createObjectURL(R);await navigator.share({title:"Minha Selfie",text:"Confira minha selfie!",url:S}),URL.revokeObjectURL(S)}}else{const w=URL.createObjectURL(R),S=document.createElement("a");S.href=w,S.download=`selfie-${Date.now()}.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(w)}}catch(w){if(w instanceof Error&&w.name!=="AbortError"){console.error("Erro ao compartilhar:",w);const S=URL.createObjectURL(R),O=document.createElement("a");O.href=S,O.download=`selfie-${Date.now()}.png`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(S)}}d(!1)},"image/png")}catch(m){console.error("Erro ao capturar foto:",m),d(!1)}}};return e.jsxs("div",{className:"selfie-screen",children:[e.jsx("div",{className:"selfie-top-overlay",children:e.jsx("img",{src:p,alt:"Top",className:"selfie-top-img"})}),e.jsx("div",{className:"selfie-bottom-overlay",children:e.jsx("img",{src:u,alt:"Bottom",className:"selfie-bottom-img"})}),e.jsx("button",{className:"selfie-camera-button",onClick:y,disabled:t,style:{backgroundImage:`url(${h})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]})};const Ke=({initialScreen:s="loading",appConfig:a,defaultTransition:c="zoom-out",defaultDirection:l="right"})=>{const[t,d]=b.useState(s||"loading"),[i,n]=b.useState(!1),[r,p]=b.useState(c),[u,h]=b.useState(l),[y,m]=b.useState(null);b.useEffect(()=>{console.log("üé¨ ScreenManager inicializado com tela:",t)},[]),b.useEffect(()=>{if(!i){const U=setTimeout(()=>{t!=="loading"&&m(null)},1e3);return()=>clearTimeout(U)}},[t,i]);const o=(U,z)=>{const I=["loading","cover","tutorial","rocket","tutorial2","ar","resultado","final","settings","about","selfie"],C=I.indexOf(U),E=I.indexOf(z);return E>C?"right":E<C?"left":"right"},f=(U,z,I)=>{const C=z||r,E=I||o(t,U);m(t),p(C),h(E);const R=t==="loading"?800:300;n(!0),setTimeout(()=>{d(U),n(!1)},R)},P=()=>{switch(t){case"loading":return e.jsx(fe,{onNavigate:f});case"cover":return e.jsx(De,{onNavigate:f,title:a.title,subtitle:a.subtitle});case"tutorial":return e.jsx(Me,{onNavigate:f});case"rocket":return e.jsx(We,{onNavigate:f});case"tutorial2":return e.jsx(Oe,{onNavigate:f});case"ar":return e.jsx(He,{onNavigate:f});case"resultado":return e.jsx(Xe,{onNavigate:f});case"final":return e.jsx(Ge,{onNavigate:f});case"settings":return e.jsx(Je,{onNavigate:f});case"about":return e.jsx(Ye,{onNavigate:f});case"selfie":return e.jsx(Qe,{onNavigate:f});default:return e.jsx(fe,{onNavigate:f})}},$=()=>{const U="screen-manager",z=`transition-${r}`,I=`direction-${u}`,C=i?"transitioning":"",E=y?`from-${y}`:"";return`${U} ${z} ${I} ${C} ${E}`.trim()};return e.jsx("div",{className:$(),children:P()})},Ze=()=>{const[s,a]=b.useState(!1),c=()=>{const l=window.innerWidth,t=window.innerHeight,d=l>t,i=navigator.userAgent.toLowerCase(),n=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(i)||"ontouchstart"in window||navigator.maxTouchPoints>0,r=l<=768;n&&d||r&&d?(a(!0),document.body.style.overflow="hidden",document.body.style.touchAction="none"):(a(!1),document.body.style.overflow="",document.body.style.touchAction="")};return b.useEffect(()=>{c();let l,t;const d=()=>{clearTimeout(l),l=setTimeout(()=>{c()},100)},i=()=>{clearTimeout(t),t=setTimeout(()=>{c()},300)},n=()=>{clearTimeout(t),t=setTimeout(()=>{c()},300)},r=h=>{clearTimeout(t),t=setTimeout(()=>{c()},100)};window.addEventListener("resize",d),window.addEventListener("orientationchange",i),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",n);const p=window.matchMedia("(orientation: landscape)");p.addEventListener("change",r);const u=setInterval(()=>{c()},2e3);return()=>{clearTimeout(l),clearTimeout(t),clearInterval(u),window.removeEventListener("resize",d),window.removeEventListener("orientationchange",i),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",n),p.removeEventListener("change",r),document.body.style.overflow="",document.body.style.touchAction=""}},[]),s?e.jsxs("div",{className:"landscape-blocker",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:999999999,color:"white",fontFamily:"Arial, sans-serif",textAlign:"center",padding:"20px",boxSizing:"border-box",pointerEvents:"auto"},children:[e.jsx("div",{style:{width:"80px",height:"80px",marginBottom:"20px",fontSize:"60px",animation:"rotate 2s ease-in-out infinite"},children:"üì±"}),e.jsx("h2",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:"Gire seu dispositivo"}),e.jsx("p",{style:{margin:"0",fontSize:"16px",opacity:.9},children:"Para uma melhor experi√™ncia de Realidade Aumentada, mantenha seu dispositivo na orienta√ß√£o retrato (vertical)."}),e.jsx("style",{children:`
          @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
          }
        `})]}):null};function xe(){const s={title:"Realidade Aumentada",subtitle:"Explore o mundo em 3D",version:"1.0.0",developer:"AR Developer"};return e.jsx(_e,{children:e.jsxs("div",{className:"ar-app",children:[e.jsx(Ze,{}),e.jsx(Ke,{initialScreen:"loading",appConfig:s})]})})}je().then(()=>{console.log("Inicializa√ß√£o global completa, iniciando React..."),re.createRoot(document.getElementById("root")).render(e.jsx(he.StrictMode,{children:e.jsx(xe,{})}))}).catch(s=>{console.error("Erro na inicializa√ß√£o global:",s),re.createRoot(document.getElementById("root")).render(e.jsx(he.StrictMode,{children:e.jsx(xe,{})}))});
//# sourceMappingURL=index-43634034.js.map
